<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Aspierrowdata</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
<script src="https://js.paystack.co/v1/inline.js"></script>
<style>
:root{--blue:#007bff;--gold:#f4c430;--bg:#f4f6f9}
*{box-sizing:border-box;font-family:'Montserrat',Arial,sans-serif}
body{margin:0;background:var(--bg)}
.page{display:none;min-height:100vh}
.page.active{display:block}
.container{max-width:1100px;margin:auto;padding:20px}
.card{background:#fff;border-radius:10px;padding:20px;margin-bottom:20px;box-shadow:0 2px 8px rgba(0,0,0,.08)}
button{background:var(--blue);color:#fff;border:none;padding:12px 16px;border-radius:6px;font-weight:bold;cursor:pointer;margin-top:10px}
button.gold{background:var(--gold);color:#000}
input,select{width:100%;padding:10px;margin:6px 0;border:1px solid #ccc;border-radius:5px}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px;margin-top:10px}
.network{border:2px solid var(--blue);padding:15px;border-radius:10px;text-align:center;font-weight:bold;cursor:pointer}
.network.active{background:var(--blue);color:#fff}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{padding:10px;border-bottom:1px solid #ddd;text-align:center}
th{background:#eef2ff}
.status-pending{color:orange;font-weight:bold}
.status-delivered{color:green;font-weight:bold}
footer{text-align:center;padding:15px;color:#666}
.whatsapp{position:fixed;bottom:20px;right:20px;background:#25d366;color:#fff;font-size:22px;padding:14px;border-radius:50%;text-decoration:none}
.back-btn{margin:10px 0;display:inline-block;cursor:pointer;background:#ccc;color:#000;padding:5px 10px;border-radius:5px}
</style>
</head>
<body>

<!-- LANDING -->
<div id="page-landing" class="page active">
 <div class="container">
  <div class="card" style="max-width:500px;margin:auto;text-align:center">
   <h1 style="color:var(--blue)">ASPIERROW DATA GH</h1>
   <p><b>Affordable ‚Ä¢ Fast Delivery‚Ä¢ Reliable</b></p>
   <button onclick="go('buy')">Buy Data Now</button><br>
   <button class="gold" onclick="go('afa')">AFA Registration</button><br>
   <button onclick="go('login')">Login / Create Account</button>
  </div>
 </div>
</div>

<!-- LOGIN -->
<div id="page-login" class="page">
 <span class="back-btn" onclick="go('landing')">‚Üê Back</span>
 <div class="container">
  <div class="card" style="max-width:400px;margin:auto">
   <h2>Agent Login</h2>
   <input id="loginEmail" placeholder="Email" />
   <input id="loginPass" type="password" placeholder="Password" />
   <button onclick="login()">Login</button>
   <p style="text-align:center">New agent? <a href="#" onclick="go('register')">Create account</a></p>
  </div>
 </div>
</div>

<!-- REGISTER -->
<div id="page-register" class="page">
 <span class="back-btn" onclick="go('login')">‚Üê Back</span>
 <div class="container">
  <div class="card" style="max-width:400px;margin:auto">
   <h2>Create Agent Account</h2>
   <input id="regName" placeholder="Full Name" />
   <input id="regPhone" placeholder="Phone Number" />
   <input id="regEmail" placeholder="Email" />
   <input id="regPass" type="password" placeholder="Password" />
   <input id="regPass" type="password" placeholder="Confirm Password" />
   <button onclick="register()">Create Account</button>
  </div>
 </div>
</div>

<!-- BUY DATA -->
<div id="page-buy" class="page">
 <span class="back-btn" onclick="go('landing')">‚Üê Back</span>
 <div class="container">
  <div class="card">
   <h2>Buy Data</h2>
   <input id="cPhone" placeholder="Beneficiary Number (0XXXXXXXXX)" />
   <div class="grid" id="networks"></div>
   <select id="cPackage"><option value="">Select Package</option></select>
   <button onclick="payCustomer()">Pay with Paystack</button>
  </div>
 </div>
</div>

<!-- AFA -->
<div id="page-afa" class="page">
 <span class="back-btn" onclick="go('landing')">‚Üê Back</span>
 <div class="container">
  <div class="card" style="max-width:500px;margin:auto">
   <h2>AFA Registration</h2>
   <input id="afaName" placeholder="Full Name" />
   <input id="afaPhone" placeholder="Phone Number" />
   <input id="afaGhana" placeholder="Ghana Card Number" />
   <button onclick="payAFA()">Pay GHS 20</button>
  </div>
 </div>
</div>

<!-- DASHBOARD -->
<div id="page-dashboard" class="page">
 <span class="back-btn" onclick="go('landing')">‚Üê Back</span>
 <div class="container">
  <div class="card">
   <button onclick="showAgentOrders()">My Orders</button>
   <button onclick="logout()">Logout</button>
   <button id="viewAgentsBtn" class="gold" onclick="showAgents()" style="display:none">View Agents</button>
  </div>
  <div id="agentOrders" class="card"></div>
  <div id="adminPanel" class="card" style="display:none">
   <h3>Admin Dashboard</h3>
   <button class="gold" onclick="exportExcel()">Export Orders</button>
   <div id="adminOrders"></div>
  </div>
  <div id="agentsList" class="card" style="display:none">
   <h3>Agents</h3>
   <div id="agentsTable"></div>
  </div>
 </div>
</div>

<a class="whatsapp" href="https://wa.me/233591467262" target="_blank">üí¨</a>
<footer>¬© 2026 Aspierrowdatagh</footer>

<script>
const PAYSTACK_KEY="pk_live_9a302e6eefda024c28eb3bc1db61db510e38285e";
const ADMIN_EMAIL="admin@aspierrowdatagh.com";
const ADMIN_PASS="admin123";

let pages=document.querySelectorAll('.page');
let users=JSON.parse(localStorage.getItem('users')||'[]');
let orders=JSON.parse(localStorage.getItem('orders')||'[]');
let currentUser=null,selectedNetwork="";

const prices={
 MTN:{1:6,2:12,3:17,4:23,5:27,10:52,15:75,20:95,25:115,30:135,40:175,50:215,100:420},
 TELECEL:{5:28,10:48,15:73,20:78,25:113,30:133,35:150,40:175,45:195,50:215,100:410},
 AIRTELTIGO:{1:6,2:11,3:16,4:21,5:26,10:47,15:68,20:83}
};

function go(p){
 pages.forEach(x=>x.classList.remove('active'));
 document.getElementById('page-'+p).classList.add('active');
 if(p==='buy') renderNetworks();
}

// Agent Register
function register(){
 if(!regName.value || !regPhone.value || !regEmail.value || !regPass.value) return alert('Fill all fields');
 users.push({name:regName.value,phone:regPhone.value,email:regEmail.value,pass:regPass.value});
 localStorage.setItem('users',JSON.stringify(users));
 alert('Account created');
 go('login');
}

// Agent Login
function login(){
 const e=loginEmail.value,p=loginPass.value;
 if(e===ADMIN_EMAIL && p===ADMIN_PASS){
   currentUser={role:'admin'};
   openDashboard();
   return;
 }
 const u=users.find(x=>x.email===e && x.pass===p);
 if(!u) return alert('Invalid login');
 currentUser={email:e,role:'agent',name:u.name};
 openDashboard();
}

function openDashboard(){
 go('dashboard');
 if(currentUser.role==='admin'){
   adminPanel.style.display='block';
   viewAgentsBtn.style.display='inline-block';
 } else {
   adminPanel.style.display='none';
   viewAgentsBtn.style.display='none';
 }
 showAgentOrders();
}

function logout(){currentUser=null;go('landing');}

// Render Networks
function renderNetworks(){
 networks.innerHTML='';
 Object.keys(prices).forEach(n=>{
   let d=document.createElement('div');
   d.className='network';
   d.textContent=n;
   d.onclick=()=>selectNetwork(n,d);
   networks.appendChild(d);
 });
 selectedNetwork='';
 cPackage.innerHTML='<option value="">Select Package</option>';
}

function selectNetwork(n,el){
 selectedNetwork=n;
 document.querySelectorAll('.network').forEach(x=>x.classList.remove('active'));
 el.classList.add('active');
 cPackage.innerHTML='<option value="">Select Package</option>';
 Object.entries(prices[n]).forEach(([g,p])=>{
   let o=document.createElement('option');
   o.value=g;
   o.textContent=`${g}GB - GHS ${p}`;
   cPackage.appendChild(o);
 });
}

// Customer Payment
function payCustomer(){
 const phone=cPhone.value.trim(),pack=cPackage.value;
 if(!/^0\d{9}$/.test(phone) || !selectedNetwork || !pack) return alert('Fill required fields');
 const price=prices[selectedNetwork][pack];
 PaystackPop.setup({
   key:PAYSTACK_KEY,
   email:'customer@aspierrowdata.com',
   amount:price*100,
   currency:'GHS',
   callback:()=>{
     orders.push({email:currentUser?.email||'customer',network:selectedNetwork,package:pack,phone,price,status:'Pending',date:new Date().toLocaleString()});
     localStorage.setItem('orders',JSON.stringify(orders));
     alert('Order placed');
     // WhatsApp
     let msg=`ASPIERROWDATA ORDER\nNetwork:${selectedNetwork}\nPackage:${pack}GB\nPhone:${phone}`;
     window.open(`https://wa.me/233591467262?text=${encodeURIComponent(msg)}`,'_blank');
   }
 }).openIframe();
}

// AFA Payment
function payAFA(){
 if(!afaName.value || !afaPhone.value || !afaGhana.value) return alert('Fill all fields');
 PaystackPop.setup({
   key:PAYSTACK_KEY,
   email:'afa@aspierrowdata.com',
   amount:2000,
   currency:'GHS',
   callback:()=>{alert('AFA Registration Successful');}
 }).openIframe();
}

// Show agent orders
function showAgentOrders(){
 let h='<table><tr><th>Date</th><th>Network</th><th>Package</th><th>Phone</th><th>Status</th></tr>';
 orders.filter(o=>currentUser.role==='admin'||o.email===currentUser.email)
 .forEach(o=>{
   h+=`<tr><td>${o.date}</td><td>${o.network}</td><td>${o.package}GB</td><td>${o.phone}</td><td class="status-${o.status.toLowerCase()}">${o.status}</td></tr>`;
 });
 h+='</table>';
 agentOrders.innerHTML=h;
 adminOrders.innerHTML=h;
}

// Export orders to CSV
function exportExcel(){
 let csv='Date,Network,Package,Phone,Status\n';
 orders.forEach(o=>csv+=`${o.date},${o.network},${o.package}GB,${o.phone},${o.status}\n`);
 let a=document.createElement('a');
 a.href=URL.createObjectURL(new Blob([csv]));
 a.download='orders.csv';
 a.click();
}

// Admin view agents
function showAgents(){
 let h='<table><tr><th>Name</th><th>Phone</th><th>Email</th></tr>';
 users.forEach(u=>h+=`<tr><td>${u.name}</td><td>${u.phone}</td><td>${u.email}</td></tr>`);
 h+='</table>';
 agentsTable.innerHTML=h;
 agentsList.style.display='block';
}

</script>
</body>
</html>
